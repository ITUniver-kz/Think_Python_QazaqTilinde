---
title: matplotlib көмегімен деректерді сызу
isFree: True
---

## 15.1 Кіріспе

Көптеген ғылыми сюжеттік пакеттер бар. Бұл тарауда біз matplotlib-ке назар аударамыз, себебі ол іс жүзінде сурет салу кітапханасы болып табылады және Python-мен өте жақсы интеграцияланады.

Бұл matplotlib сызу пакетіне қысқаша кіріспе ғана. Оның мүмкіндіктері мен теңшеулері жобаның веб-бетінде, Бастауыш нұсқаулығында, matplotlib.pyplot оқулығында және matplotlib.pyplot құжаттамасында ұзақ сипатталған. (Әсіресе pyplot.plot нақты құжаттамасын тексеріңіз).

## 15.2 Негізгі қолдану – pyplot.plot

Matplotlib-ті қарапайым пайдалану қарапайым:

```python
>>> from matplotlib import pyplot as plt
>>> plt.plot([1,2,3,4])
[<matplotlib.lines.Line2D at 0x7faa8d9ba400>]
>>> plt.show()
```

Егер сіз осы кодты интерактивті Python аудармашысында іске қоссаңыз, келесідей сюжетті алуыңыз керек:

![Plot_1](https://user-images.githubusercontent.com/84173441/176396584-82587a03-66d0-4991-b13d-b543477aeca1.JPG)

Бұл сюжеттен екі нәрсені ескеру керек:

- pyplot.plot біздің бірыңғай деректер тізімін y-мәндері деп есептеді;
- x-мәндер тізімі болмаған кезде оның орнына \[0, 1, 2, 3] пайдаланылды.

---

Ескерту: pyplot әдетте plt ретінде қысқартылған, numpy әдетте np ретінде қысқартылған сияқты. Осы тараудың қалған бөлігі қысқартылған нысанды пайдаланады.

---

---

Ескертпе: IPython сияқты жетілдірілген интерактивті питон интерпретаторлары сіз үшін кейбір жоспарлау қоңырауларын автоматтандыруы мүмкін. Мысалы, %matplotlib файлын IPython бағдарламасында іске қосуға болады, одан кейін plt.plot қызметіне қоңырау шалған кезде plt.show әр уақытта іске қосу қажет емес. Қарапайымдылық үшін plt.show да қалдырылады
осы мысалдардың қалған бөлігінен.

---

Егер сіз plt.plot файлына екі тізімді жіберсеңіз, онда x мәндерін нақты орнатасыз:

```python
>>> plt.plot([0.1, 0.2, 0.3, 0.4], [1, 2, 3, 4])
```

![Plon_2](https://user-images.githubusercontent.com/84173441/176397170-0b59f82d-32f9-43de-afa7-ec1e8f86df35.JPG)

Түсінікті, егер сіз екі тізімді ұсынсаңыз, олардың ұзындығы сәйкес болуы керек:

```python
>>> plt.plot([0.1, 0.2, 0.3, 0.4], [1, 2, 3, 4, 5])
ValueError: x and y must have same first dimension
```

Бірнеше қисық сызықтарды салу үшін қажет болғанша x–y тізім жұптары бар plt.plot деп атаңыз:

```python
>>> plt.plot([0.1, 0.2, 0.3, 0.4], [1, 2, 3, 4],
[0.1, 0.2, 0.3, 0.4], [1, 4, 9, 16])
```

![Plot_3](https://user-images.githubusercontent.com/84173441/176397461-eb57d9d5-239a-4a71-9fd8-cd3d4c78e380.JPG)

Немесе plt.plot деп қайта-қайта қоңырау шалу арқылы көбірек сюжеттер қосуға болады. Келесі код үзіндісі алдыңғы код мысалымен бірдей сюжетті жасайды:

```python
>>> plt.plot([0.1, 0.2, 0.3, 0.4], [1, 2, 3, 4])
>>> plt.plot([0.1, 0.2, 0.3, 0.4], [1, 4, 9, 16])
```

Сюжеттік осьтерге ақпаратты қосу оңай:

```python
>>> plt.plot([0.1, 0.2, 0.3, 0.4], [1, 2, 3, 4])
>>> plt.plot([0.1, 0.2, 0.3, 0.4], [1, 4, 9, 16])
>>> plt.xlabel("Time (s)")
>>> plt.ylabel("Scale (Bananas)")
```

![Plot_4](https://user-images.githubusercontent.com/84173441/176397808-490ee1cf-dc49-47a3-8a30-2ac67582d682.JPG)

Сондай-ақ, легенда қосу өте қарапайым:

```python
>>> plt.plot([0.1, 0.2, 0.3, 0.4], [1, 2, 3, 4], label='first plot')
>>> plt.plot([0.1, 0.2, 0.3, 0.4], [1, 4, 9, 16], label='second plot')
>>> plt.legend()
```

![Plot_5](https://user-images.githubusercontent.com/84173441/176398028-bfaa6cfd-7dab-4717-b7ed-9042360825b4.JPG)

Ал осьтер ауқымдарын реттеу plt.xlim және plt.ylim деп тиісті осьтер үшін төменгі және жоғары шектерді шақыру арқылы орындалуы мүмкін.

```python
>>> plt.plot([0.1, 0.2, 0.3, 0.4], [1, 2, 3, 4])
>>> plt.plot([0.1, 0.2, 0.3, 0.4], [1, 4, 9, 16])
>>> plt.xlabel("Time (s)")
>>> plt.ylabel("Scale (Bananas)")
>>> plt.xlim(0, 1)
>>> plt.ylim(-5, 20)
```

![Plot_6](https://user-images.githubusercontent.com/84173441/176398232-2774fdd8-3922-4c8c-a3bf-b8cd3d15f0a6.JPG)

x және y деректер тізімдерінен басқа, plt.plot сонымен қатар сызу стилін анықтайтын жолдарды қабылдай алады:

```python
>>> plt.plot([0.1, 0.2, 0.3, 0.4], [1, 2, 3, 4], 'rx')
>>> plt.plot([0.1, 0.2, 0.3, 0.4], [1, 4, 9, 16], 'b-.')
>>> plt.xlabel("Time (s)")
>>> plt.ylabel("Scale (Bananas)")
```

![Plot_7](https://user-images.githubusercontent.com/84173441/176398403-a4b72bde-e2ca-4d4e-9217-2af0e397b71b.JPG)

Әр x–y жұбына бір мәнді жолдар түс пен пішінді көрсетеді: «rx» қызыл кресттерді білдіреді және «b-.» көк сызықша сызығын білдіреді. Түстер мен пішіндер тізімін алу үшін pyplot.plot құжаттамасын тексеріңіз.

Соңында, plt.plot сонымен қатар ыңғайлы түрде numpy массивтерін аргумент ретінде қабылдай алады.

## 15.3 Қосымша учаскелер

plt.plot негізгі графиктік қажеттіліктерді қанағаттандыра алатын болса, matplotlib басқа да көптеген сызу функцияларын қамтамасыз етеді. Төменде жолақты диаграммаларды салу үшін plt.bar функциясын қолданып көреміз. Графиктік функциялардың толық тізімін matplotlib.pyplot құжаттамасынан табуға болады.

Бағаналы диаграммаларды plt.plot бағдарламасына ұқсас етіп plt.bar арқылы салуға болады:

```python
>>> plt.bar(range(7), [1, 2, 3, 4, 3, 2, 1])
```

![Plot_8](https://user-images.githubusercontent.com/84173441/176398774-bc42a2fe-20ee-45d3-bad5-0ae07ddc6413.JPG)

Дегенмен, plt.plot файлына қайшы сіз әрқашан x және y мәндерін көрсетуіңіз керек екенін ескеріңіз (олар жолақ диаграмма терминдерінде сол жақ қалта шеттері мен жолақ биіктіктеріне сәйкес келеді). Сондай-ақ, әр қоңырауға тек бір диаграмма салуға болатынын ескеріңіз. Бірнеше, қабаттасатын диаграммалар үшін plt.bar сайтына қайта-қайта қоңырау шалу керек.

plt.bar қосымша аргументтерінің бірі жолақтардың енін көрсетуге мүмкіндік беретін ені болып табылады. Оның әдепкі 0,8 мәні барлық жағдайлар үшін ең қолайлы болмауы мүмкін, әсіресе x мәндері аз болған кезде:

```python
>>> plt.bar(numpy.arange(0., 1.4, .2), [1, 2, 3, 4, 3, 2, 1])
```

![Plot_9](https://user-images.githubusercontent.com/84173441/176399118-a359f5c2-677e-447f-96a5-170d9d9a3696.JPG)

Тар жолақтарды көрсету бізге әлдеқайда жақсы нәтиже береді:

```python
>>> plt.bar(numpy.arange(0., 1.4, .2), [1, 2, 3, 4, 3, 2, 1], width=0.2)
```

![Plot_10](https://user-images.githubusercontent.com/84173441/176399308-25799e58-9921-46a9-b0ec-6bb57e3f6240.JPG)

Кейде сіз функцияны өлшенген деректермен салыстырғыңыз келеді; мысалы, сіз жаңа ғана функцияны орнатқан кезде. Әрине, бұл matplotlib арқылы мүмкін. Алғашқы 10 жай санға квадрат функцияны орнаттық делік және біздің сәйкестік деректерімізге қаншалықты сәйкес келетінін тексергіміз келеді.

```python
import matplotlib.pyplot as plt

def found_fit(x):
    return 0.388 * x**2 # Found with symfit.
    
x_data = list(range(10))
y_data = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29]

x_func = np.linspace(0, 10, 50)
# numpy will do the right thing and evaluate found_fit for all elements
y_func = found_fit(x_func)

# From here the plotting starts

plt.scatter(x_data, y_data, c='r', label='data')
plt.plot(x_func, y_func, label='$f(x) = 0.388 x^2$')
plt.xlabel('x')
plt.ylabel('y')
plt.title('Fitting primes')
plt.legend()
plt.show()
```

Біз шашырау сызбасын қызылға айналдырдық, оған аргументті c='r'; c түсті, r қызылды білдіреді. Сонымен қатар, біз сюжеттік мәлімдемеге берген белгі LaTeX пішімінде, бұл оны өте әдемі етеді. Бұл өте қолайлы емес, бірақ бұл жерде маңызды емес.

![Plot_11](https://user-images.githubusercontent.com/84173441/176399946-07b7cbca-b073-4705-aa5b-6b7a9d97a9f1.JPG)

## 15.4 Интерактивтілік және файлға сақтау

Егер сіз Python/IPython консолін пайдаланып алдыңғы мысалдарды қолданып көрген болсаңыз, әр сюжет үшін интерактивті терезе болуы мүмкін.

Осы терезедегі ең оң жақ төрт түйме арқылы бірнеше әрекеттерді орындауға болады:
- Сюжет аумағын айналдыру;
- Үлкейту және кішірейту;
- Интерактивті сюжет өлшемін басқаруға қол жеткізу;
- Файлға сақтау.

Ең сол жақ үш түйме масштабтау/панировкалаудан кейін әртүрлі сюжет көріністері арасында шарлауға мүмкіндік береді.

![Plot_12](https://user-images.githubusercontent.com/84173441/176400276-ff5a310d-ff7e-4d8a-b864-8c37ed00d3d8.JPG)

Жоғарыда түсіндірілгендей, файлға сақтауды интерактивті сюжеттік терезеден оңай жасауға болады. Дегенмен, сценарийіңіз сюжетті тікелей сурет ретінде жазып, интерактивті терезені көрсетпеу қажеттілігі туындауы мүмкін. Мұны plt.savefig шақыру арқылы оңай жасауға болады:

```python
>>> plt.plot([0.1, 0.2, 0.3, 0.4], [1, 2, 3, 4], 'rx')
>>> plt.plot([0.1, 0.2, 0.3, 0.4], [1, 4, 9, 16], 'b-.')
>>> plt.xlabel("Time (s)")
>>> plt.ylabel("Scale (Bananas)")
>>> plt.savefig('the_best_plot.pdf')
```

---

Ескертпе: Сюжетті сақтау кезінде сіз векторлық пішімін (pdf, ps, eps немесе svg) таңдағыңыз келеді. Бұл ажыратымдылыққа тәуелсіз пішімдер және өте үлкен өлшемдерде басып шығарылғанның өзінде ең жақсы сапаны береді. PNG ретінде сақтаудан аулақ болу керек, ал jpg ретінде сақтаудан одан да аулақ болу керек.

---

## 15.5 Бірнеше цифрлар

Бұл негіздеменің арқасында біз біршама жетілдірілген matplotlib қолдануға көшеміз. Сондай-ақ оны объектіге бағытталған түрде пайдалануға болады, бұл бірнеше сюжеттер мен фигураларды көбірек бөлуге мүмкіндік береді. Бізде бір суретте емес, бір-бірінің қасында орналастырғымыз келетін екі деректер жинағы бар делік. Matplotlib-те бірнеше ұйымдастыру қабаттары бар: біріншіден, фигура нысаны бар, ол негізінен сіздің сюжеттеріңіз салынған терезе болып табылады. Оның үстіне сіздің жеке графиктеріңіз болып табылатын Axes нысандары бар. Бір суретте бірнеше (немесе жоқ) осьтер болуы әбден мүмкін. add_subplot әдісін сәл кейінірек түсіндіреміз. Әзірге ол тек Axis данасын жасайды.

```python
import matplotlib.pyplot as plt

x_data = [0.1, 0.2, 0.3, 0.4]
y_data = [1, 2, 3, 4]

fig = plt.figure()
ax = fig.add_subplot(1, 1, 1)
ax.plot([0.1, 0.2, 0.3, 0.4], [1, 2, 3, 4])
ax.plot([0.1, 0.2, 0.3, 0.4], [1, 4, 9, 16])
ax.set_xlabel('Time (s)')
ax.set_ylabel('Scale (Bananas)')

plt.show()
```

![Plot_13](https://user-images.githubusercontent.com/84173441/176401008-c01429d5-971f-4869-b0ce-a34605dac1bc.JPG)

Бұл мысал сонымен қатар Matplotlib кемшіліктерінің бірін нақты көрсетеді: API өте сәйкес емес. Бұрын xlabel() функциясын орындайтын болсақ, енді set_xlabel() функциясын орындауымыз керек. Сонымен қатар, біз сандарды бір-бірден көрсете алмаймыз (мысалы, fig.show()); оның орнына plt.show() арқылы олардың барлығын бір уақытта ғана көрсете аламыз.

Енді біз бір-бірінің қасында бірнеше сюжеттер жасағымыз келеді. Біз мұны екі түрлі осьте сюжетті шақыру арқылы жасаймыз:

```python
x_data1 = [0.1, 0.2, 0.3, 0.4]
y_data1 = [1, 2, 3, 4]

x_data2 = [0.1, 0.2, 0.3, 0.4]
y_data2 = [1, 4, 9, 16]

fig = plt.figure()
ax1 = fig.add_subplot(1, 2, 1)
ax2 = fig.add_subplot(1, 2, 2)
ax1.plot(x_data1, y_data1, label='data 1')
ax2.plot(x_data2, y_data2, label='data 2')
ax1.set_xlabel('Time (s)')
ax1.set_ylabel('Scale (Bananas)')
ax1.set_title('first data set')
ax1.legend()
ax2.set_xlabel('Time (s)')
ax2.set_ylabel('Scale (Bananas)')
ax2.set_title('second data set')
ax2.legend()

plt.show()
```

![Plot_14](https://user-images.githubusercontent.com/84173441/176401676-86b4d500-3a1e-4a77-a05c-e2e64d3a23d5.JPG)

add_subplot әдісі Axis данасын қайтарады және үш аргумент қабылдайды: біріншісі - жасалатын жолдар саны; екіншісі - бағандар саны; ал соңғысы - дәл қазір қандай учаске нөмірін қосамыз. Осылайша, жалпы пайдалануда бірдей алғашқы екі аргументпен жасағыңыз келетін әрбір ось үшін add_subplot деп бір рет шақыру қажет болады. Келесі қоңырауда алдымен бір жол мен екі бағанды, ал екі жол мен бір бағанды сұрасаңыз не болады?

## 15.6 Жаттығулар

1. Үзік сызықты сызыңыз.

2. Matplotlib құжаттамасын іздеңіз және оның барлық деректер нүктелерінде сызба белгілері бар сызықты сызыңыз. Мұны plt.plot сайтына бір ғана қоңырау арқылы жасауға болады.

