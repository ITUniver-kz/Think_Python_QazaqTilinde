---
title: Сөздіктер
isFree: true
---

## 11. Сөздіктер. Dictionaries

Біз осы уақытқа дейін егжей-тегжейлі зерттеген құрама деректер түрлерінің барлығы - тіркестер, тізімдер және кортеждер - олар өз ішіндегі мәндерге қол жеткізу үшін бүтін сандарды индекс ретінде пайдаланатын реттілік типті дерек түрлері.

Сөздіктер (**Dictionaries**) құрама дерек түрдің тағы бір типі болып табылады. Олар Python-ның кірістірілген беттестіру түрі (**mapping type**). Сөздіктер, кез-келген өзгермейтін дерек түрі болуы мүмкін _кілттерді_ (**keys**) кез-келген түр (гетерогенді) болуы мүмкін _мәндерге_ (**value**) беттестіреді. Басқа тілдерде олар ассоциативті массивтер (associative arrays) деп аталады, өйткені олар **_кілтті мәнмен байланыстырады_**.

Мысал ретінде біз ағылшын сөздерін испан тіліне аудару үшін сөздік жасаймыз. Бұл сөздік үшін кілт, тіркестер (strings) болып табылады.

Сөздікті жасаудың бір жолы - бос сөздіктен бастау және **key:value жұптарын** қосу. Бос сөздік { } деп белгіленеді:

```python
>>> english_spanish = {}
>>> english_spanish["one"] = "uno"
>>> english_spanish["two"] = "dos"
```

Бірінші тағайындау ```english_spanish``` деп аталатын сөздікті жасайды; басқа тағайындаулар сөздікке жаңа кілт:мән жұптарын қосады. Біз сөздіктің ағымдағы мәнін әдеттегідей басып шығара аламыз:

```python
>>> print(english_spanish)
{"two": "dos", "one": "uno"}
```

Сөздіктің кілт:мән жұптары үтірмен бөлінген. Әрбір жұп қос нүктемен бөлінген кілт пен мәнді қамтиды.

\* Өзіңіз қазір қазақ-ағылшын тіліндегі сөздікті жазып көріңіз

---

**Хэшинг / Hashing**

Жұптардың реті біз күткендей болмауы мүмкін. Python кілт:мән жұптарына өте жылдам қол жеткізуге арналған күрделі алгоритмдерді пайдаланып сөздікте мән қай жерде сақталатынын анықтайды. Біздің мақсаттарымыз үшін бұл орналастыруды болжау мүмкін емес деп санауға болады.

Мәнге кілтті беттестірудің өзге оңай жолы кортеждер тізімі арқылы жасай алуға мүмкін болғанда, сөздіктерді не үшін пайдалануымыз керек деген сұрақ туындауы мүмкін:

```python
>>> {"apples": 430, "bananas": 312, "oranges": 525, "pears": 217}
{'pears': 217, 'apples': 430, 'oranges': 525, 'bananas': 312}
>>> [('apples', 430), ('bananas', 312), ('oranges', 525), ('pears', 217)]
[('apples', 430), ('bananas', 312), ('oranges', 525), ('pears', 217)]
```

Себебі сөздіктер өте жылдам, ол мәнге өте жылдам қол жеткізуге мүмкіндік беретін хэшинг деп аталатын әдіс арқылы жүзеге асырылады. Керісінше, кортеждер тізімі әдісін қолдану баяу жұмыс жасайды. Егер кілтпен байланысты мәнді тапқымыз келсе, 0-ші элементті тексере отырып, әрбір кортежді тексеріп өту керек еді. Кілт:мән тіпті тізімде болмаса ше? Мұны білу үшін біз оны соңына дейін қарап шығуымыз қажет.

---

Сөздікті жасаудың тағы бір жолы - алдыңғы кодтан шыққан нәтижемен бірдей синтаксисті пайдаланып кілт:мән жұптарының тізімін беру:

```python
>>> english_spanish = {"one": "uno", "two": "dos", "three": "tres"}
```

Жұптарды қандай ретпен жазғанымыз маңызды емес. Сөздіктегі мәндерге индекстермен емес, кілттер арқылы қол жеткізіледі, сондықтан реттілік туралы ойланудың қажеті жоқ.

Сәйкес мәнді іздеу үшін кілтті қалай қолданатынымыз төменде көрсетілген:

```python
>>> print(english_spanish["two"])
'dos'
```

«two» кілті «dos» мәнін береді.

Тіркестер, кортеждер және тізімдер _реттілік (sequences)_ деп аталды, себебі олардың элементтері ретімен орналасады. Сөздік - біз көрген реттілік емес бірінші құрама түрі, сондықтан біз сөздікті индекстей алмаймыз немесе оны кесу (slice) мүмкін емес.

## 11.1. Сөздік операциялары

```del``` операторы сөздіктен кілт:мән жұбын жояды. Мысалы, келесі сөздікте әртүрлі жемістердің атаулары мен қоймадағы әрбір жемістің саны берілген:

```python
>>> inventory = {"apples": 430, "bananas": 312, "oranges": 525, "pears": 217}
>>> print(inventory)
{'pears': 217, 'apples': 430, 'oranges': 525, 'bananas': 312}
```

Егер біреу бананның барлығын сатып алса, біз сөздіктегі жазбаны алып тастай аламыз:

```python
>>> del inventory["bananas"]
>>> print(inventory)
{'apples': 430, 'oranges': 525, 'pears': 217}
```

Егер бізде қанша банан бар екенін көруге тырыссақ, біз қате аламыз (өйткені, иә, бізде банан жоқ). (Мұны өзіңіз тексеріп көріңіз!)

Немесе жақын арада көбірек банан күтетін болсақ, біз бананмен байланысты мәнді өзгерте аламыз:

```python
>>> inventory["bananas"] = 0
>>> print(inventory)
{'pears': 217, 'apples': 430, 'oranges': 525, 'bananas': 0}
```

Келіп жатқан банандардың жаңа түсімі келесідей өңделуі мүмкін:

```python
>>> inventory["bananas"] += 200
>>> print(inventory)
{'pears': 0, 'apples': 430, 'oranges': 525, 'bananas': 512}
```

```len``` функциясы сөздіктерде де жұмыс істейді; ол кілт:мән жұптарының сөздіктегі саны қанша екенін қайтарады:

```python
>>> len(inventory)
4
```

## 11.2. Сөздік әдістері 

Сөздіктерде кірістірілген пайдалы бірнеше әдістер бар.

```keys``` әдісі негізгі кілттердің көрінісі (**views**) деп атайтын нәрсені қайтарады. View (көрініс) нысанының біз бұрын көрген ```range``` нысанына кейбір ұқсастықтары бар — бұл өзіндегі элементтерді бағдарламаның қалған бөлігіне қажет болғанда жеткізуге уәде, жалқау уәде. Біз көріністі итерация жасай (iterate over) аламыз немесе көріністі төменде көрсетілгенде тізімге айналдыра аламыз:

```python
for key in english_spanish.keys(): # The order of the k's is not defined
   print("Got key", key, "which maps to value", english_spanish[key])

keys = list(english_spanish.keys())
print(keys)
```

Бұл келесідей нәтиже шығарады:

```python
Got key three which maps to value tres
Got key two which maps to value dos
Got key one which maps to value uno
['three', 'two', 'one']
```

Сөздіктегі кілттерді итерациялаудың жиі кездесетіні сонша, біз ```for``` цикліндегі ```keys``` әдісін шақыруды жазбай тастап кетсек болады — сөздік бойынша итерация жасау оның кілттері бойынша жанама түрде итерация жасайды:

```python
for key in english_spanish:
   print("Got key", key)
```

```values``` (мәндер) әдісі ұқсас; ол тізімге айналдыруға болатын көрініс нысанын (view object) қайтарады:

```python
>>> list(english_spanish.values())
['tres', 'dos', 'uno']
```

```items``` әдісі көрініс қайтарады, ол кортеждер тізімін уәде етеді — әрбір кілт:мән жұбы үшін бір кортеж:

```python
>>> list(english_spanish.items())
[('three', 'tres'), ('two', 'dos'), ('one', 'uno')]
```

Цикл кезінде кілт пен мәнді бір уақытта алу үшін кортеждер жиі пайдалы:

```python
for (key,value) in english_spanish.items():
    print("Got",key,"that maps to",value)
```

Бұл мынандай нәтиже шығарады:

```python
Got three that maps to tres
Got two that maps to dos
Got one that maps to uno
```

```in``` және ```not in``` операторлары кілт сөздікте бар-жоғын тексере алады:

```python
>>> "one" in english_spanish
True
>>> "six" in english_spanish
False
>>> "tres" in english_spanish # Note that 'in' tests keys, not values.
False
```

Бұл әдіс өте пайдалы болуы мүмкін, өйткені сөздікте жоқ кілтті іздеу орындалу қатесін тудырады:

```python
>>> english_spanish["dog"]
Traceback (most recent call last):
...
KeyError: 'dog'
```

## 11.3. Бүркеншік ат қою және көшіру

Тізімдер сияқты, сөздіктер де өзгермелі болғандықтан, біз бүркеншік атауды ескеруіміз керек. Екі айнымалы бір нысанға сілтеме жасағанда, біреуіне жасалған өзгерістер екіншісіне әсер етеді.

Егер сөздікті өзгеріп, бірақ түпнұсқаның көшірмесін сақтағыңыз келсе көшіру ```copy``` әдісін қолданыңыз. Мысалы, ```opposites``` – қарама-қарсы жұптарды қамтитын сөздік:

```python
>>> opposites = {"up": "down", "right": "wrong", "yes": "no"}
>>> alias = opposites
>>> copy = opposites.copy() # Shallow copy
```

```alias``` пен ```opposites``` бір нысанға сілтеме жасайды; ```copy``` дәл сол сөздіктің жаңа көшірмесіне сілтеме жасайды. Егер біз ```alias``` өзгертсек, ```opposites``` те өзгереді:

```python
>>> alias["right"] = "left"
>>> opposites["right"]
'left'
```

```copy```-ді өзгертсек, ```opposites``` өзгермейді:

```python
>>> copy["right"] = "privilege"
>>> opposites["right"]
'left'
```

## 11.6. Әріптерді санау

8-ші, "Дерек типтері. Тіркестер" тарауындағы жаттығуларда тіркестегі әріптің кездесу санын есептейтін функцияны жаздық. Бұл мәселенің жалпы нұсқасы тіркестегі әріптердің жиілік кестесін құру болып табылады, яғни әр әріп қанша рет пайда болады.

Мұндай жиілік кестесі мәтіндік файлды сығымдау (compression) үшін пайдалы болуы мүмкін. Әртүрлі әріптер әртүрлі жиілікте пайда болатындықтан, біз жиі қолданылатын әріптер үшін қысқа кодтарды және сирек кездесетін әріптер үшін ұзын кодтарды пайдалану арқылы файлды сығымдай аламыз.

Сөздіктер жиілік кестесін құрудың оңай әрі түсінікті әдісін ұсынады:

```python
letter_counts = {}

for letter in "Mississippi":
    letter_counts[letter] = letter_counts.get(letter, 0) + 1

print(letter_counts)

{'M': 1, 'i': 4, 's': 4, 'p': 2}
```

Біз бос сөздіктен бастаймыз. Тіркестегі әрбір әріп үшін ағымдағы санды (default нөл деп аламыз) белгілейміз және оны өсіреміз. Соңында сөздік әріптер мен олардың жиіліктерін қамтитын жұпты шығарады. (dictionary.[get](https://www.w3schools.com/python/ref_dictionary_get.asp)() әдісі жайында қосымша ақпарат)

Жиілік кестесін алфавиттік ретпен көрсету қызықтырақ болуы мүмкін. Біз мұны ```items``` және ```sort``` (сұрыптау) әдістерімен жасай аламыз (дәлірек айтқанда, қатарды лексикографиялық түрде сұрыптау):

```python
>>> letter_items = list(letter_counts.items())
>>> letter_items.sort()
>>> print(letter_items)
[('M', 1), ('i', 4), ('p', 2), ('s', 4)]
```

Назар аударыңыз, бірінші жолда біз ```list``` түр түрлендіру функциясын шақыруымыз керек болды. Бұл ```item```-нет алатын уәдемізді тізімге айналдырады, бұл тізімнің ```sort``` әдісін қолданар алдында қажетті қадам.

## 11.7. Глоссарий

**шақыру графигі** / **call graph**
Функция жақтауларын (немесе шақыруларын) көрсететін түйіндерден және бір фреймнің қай фреймнен пайда болғанын көрсететін бағытталған жиектерден тұратын график.
мысалы: [en](https://cerfacs.fr/coop/pycallgraph#:~:text=The%20call%20graph%20is%20a,pycallgraph) [kz](https://cerfacs-fr.translate.goog/coop/pycallgraph?_x_tr_sl=en&_x_tr_tl=kk&_x_tr_hl=en&_x_tr_pto=wapp#:~:text=The%20call%20graph%20is%20a,pycallgraph)

**сөздік** / **dictionary**
Кілттерден мәндерге беттестіретін(салыстыратын) кілт:мән жұптарының (key:value pairs) жинағы. Кілттер кез келген өзгермейтін мән болуы мүмкін, ал оған байланысқан мән кез келген дерек типі болуы мүмкін.

**өзгермейтін деректер мәні** / **immutable data value**
Өзгертуге болмайтын деректер мәні. Элементтерге немесе өзгермейтін мәндердің кесінділеріне (ішкі бөліктерге) тағайындаулар жасау орындалу қатесін тудырады.

**кілт** / **key**
Сөздіктегі мәнге _беттестірілген (mapped to)_ дерек элементі. Кілттер сөздіктегі мәндерді іздеу үшін пайдаланылады. Әрбір кілт сөздікте қайталанбас, уникалды болуы керек.

**кілт:мән жұбы** / **key:value pair**
Сөздіктегі жұп элементтердің бірі. Мәндер сөздікте кілт бойынша ізделеді.

**беттестіру түрі** / **mapping type**
Беттестіру (салыстыру түрі) - кілттер жиынынан және байланысты мәндерден тұратын деректер түрі. Python-ның жалғыз кірістірілген беттестіру түрі - сөздік. Сөздіктер [ассоциативті массив](https://en-m-wikipedia-org.translate.goog/wiki/Associative_array?_x_tr_sl=auto&_x_tr_tl=kk&_x_tr_hl=en&_x_tr_pto=wapp) abstract деректер түрін жүзеге асырады.

**жадынама** / **memo**
Бірдей есептеуді қайталамау үшін алдын ала есептелген мәндерді уақытша сақтау.

**өзгермелі деректер мәні** / **mutable data value**
Өзгертуге болатын деректер мәні. Барлық өзгермелі мәндердің түрлері құрама типтер болып табылады. Тізімдер мен сөздіктер өзгермелі; жолдар мен кортеждер жоқ.


## 11.8. Жаттығулар

1. Тіркесті оқитын және тіркесте кездесетін алфавиттің әріптерінің кестесін әр әріптің неше рет кездесетінімен бірге қайтаратын программа жазыңыз. Бас әріпті, кіші әріпті елемеу керек. Пайдаланушы «ThiS is String with Upper and lower case Letters» деректерін енгізген кезде бағдарламаның үлгісі келесідей болады. Және әріптер алфавиттік ретте болуы керек:


```python
a  2
c  1
d  1
e  5
g  1
h  2
i  4
l  2
n  2
o  1
p  2
r  4
s  5
t  5
u  1
w  2
```

2. Үздіксіз интерпретация сеансынан төмендегілердің әрқайсысына Python интерпретаторының жауабын беріңіз:

a.
```python
>>> d = {"apples": 15, "bananas": 35, "grapes": 12}
>>> d["bananas"]
```

b.
```python
>>> d["oranges"] = 20
>>> len(d)
```

c.
```python
>>> "grapes" in d
```

d.
```python
>>> d["pears"]
```

e.
```python
>>> d.get("pears", 0)
```

f.
```python
>>> fruits = list(d.keys())
>>> fruits.sort()
>>> print(fruits)
```

g.
```python
>>> del d["apples"]
>>> "apples" in d
```

Әрбір нәтижені не үшін алғаныңызды түсінгеніңізге сенімді болыңыз. 

Содан кейін төмендегі функцияның негізгі бөлігін толтыру үшін үйренгендеріңізді қолданыңыз:

```python
def add_fruit(inventory, fruit, quantity=0):
     return

# Make these tests work...
new_inventory = {}
add_fruit(new_inventory, "strawberries", 10)
test("strawberries" in new_inventory)
test(new_inventory["strawberries"] == 10)
add_fruit(new_inventory, "strawberries", 25)
test(new_inventory["strawberries"] == 35)
```

3. Алисаның ғажайыптар еліндегі шытырман оқиғаларының мәтіндік нұсқасындағы барлық сөздердің алфавиттік тізімін және әрқайсысының кездесу санын қамтитын ```alice_words.txt``` атты мәтіндік файлды жасайтын ```alice_words.py``` деп аталатын бағдарламаны жазыңыз. (Кітаптың қарапайым мәтіндік нұсқасын басқалармен қатар http://www.gutenberg.org сайтынан алуға болады.) Шығыс файлыңыздың алғашқы 10 жолы келесідей болуы керек:

```python
Word              Count
=======================
a                 631
a-piece           1
abide             1
able              1
about             94
above             3
absence           1
absurd            2
```

```alice``` сөзі кітапта неше рет кездеседі?

[Alice's Adventures in Wonderland by Lewis Carroll](https://www.gutenberg.org/ebooks/28885)

4. Алиса ғажайыптар еліндегі ең ұзын сөз қандай? Оның неше кейіпкері бар?
